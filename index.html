<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Discrete Math Quiz</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .quiz-layout { display: flex; }
        .quiz-main { flex: 1; }
        .quiz-sidebar {
            width: 120px;
            margin-left: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .qnav {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        .qnav-btn {
            width: 32px;
            height: 32px;
            border: 1px solid #888;
            background: #eee;
            border-radius: 6px;
            text-align: center;
            line-height: 32px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s, color 0.2s;
        }
        .qnav-btn.active {
            background: #0078d4;
            color: #fff;
            border: 2px solid #0078d4;
        }
        .qnav-btn.correct {
            background: #2ecc40 !important;
            color: #fff !important;
            border: 2px solid #2ecc40 !important;
        }
        .qnav-btn.incorrect {
            background: #ff4136 !important;
            color: #fff !important;
            border: 2px solid #ff4136 !important;
        }
        .question-block.correct {
            background: #eaffea;
            border: 2px solid #2ecc40;
        }
        .question-block.incorrect {
            background: #ffeaea;
            border: 2px solid #ff4136;
        }
        #timer-box {
            margin: 10px 0;
            padding: 8px 12px;
            background: #f5f5f5;
            border-radius: 6px;
            font-size: 1.2em;
            display: inline-block;
        }
        #start-timer-btn {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
<div class="quiz-layout">
    <div class="quiz-main">
        <h1>Discrete Math Quiz</h1>
        <div id="timer-box">
            <button id="start-timer-btn">Start Timer</button>
            <span id="timer-display"></span>
        </div>
        <form id="quiz-form" autocomplete="off">
            <!-- Questions will be injected here by JS -->
        </form>
        <div id="result"></div>
        <div id="feedback"></div>
    </div>
    <div class="quiz-sidebar">
        <h3>Questions</h3>
        <div class="qnav" id="qnav"></div>
    </div>
</div>
<script>
    const QUESTIONS = [
        // 1-8
        {
            text: 'For $f(n)=4n\\log n+9n$, which witness pair $(c,n_0)$ <b>cannot</b> certify $f(n)=O(n\\log n)$?',
            type: 'select',
            options: [
                {v:'a', t:'a) $c=15,\\;n_0=1$'},
                {v:'b', t:'b) $c=5,\\;n_0=10$'},
                {v:'c', t:'c) $c=2,\\;n_0=1$'},
                {v:'d', t:'d) $c=8,\\;n_0=3$'}
            ],
            answer: 'c'
        },
        {
            text: '$g(n)=3n^2\\log n+7n^{1.5}$.  The tightest upper bound below is',
            type: 'select',
            options: [
                {v:'a', t:'a) $O(n^{2.5})$'},
                {v:'b', t:'b) $O(n^2\\log n)$'},
                {v:'c', t:'c) $O(n^2)$'},
                {v:'d', t:'d) $O(n^3)$'}
            ],
            answer: 'b'
        },
        {
            text: 'Which <b>must</b> hold if $f(n)=\\Theta(h(n))$?',
            type: 'select',
            options: [
                {v:'a', t:'a) $\\lim_{n\\to\\infty}f/h=0$'},
                {v:'b', t:'b) $f\\in O(h)$ and $h\\in O(f)$'},
                {v:'c', t:'c) $f\\in o(h)$'},
                {v:'d', t:'d) $f\\in \\omega(h)$'}
            ],
            answer: 'b'
        },
        {
            text: 'Let $T(n)=2T(n/2)+n/\\log n$ for $n\\ge 2$.  Using Master Theorem, $T(n)=$',
            type: 'select',
            options: [
                {v:'a', t:'a) $\\Theta(n)$'},
                {v:'b', t:'b) $\\Theta(n\\log n)$'},
                {v:'c', t:'c) $\\Theta(n\\log\\log n)$'},
                {v:'d', t:'d) $\\Theta(n\\log^2 n)$'}
            ],
            answer: 'a'
        },
        {
            text: 'Which statement is <b>false</b>?  If $f(n)=O(g(n))$ and $g(n)=O(h(n))$ then',
            type: 'select',
            options: [
                {v:'a', t:'a) $f=O(h)$'},
                {v:'b', t:'b) $h=\\Omega(f)$'},
                {v:'c', t:'c) $h=o(f)$'},
                {v:'d', t:'d) $f=O(g)$'}
            ],
            answer: 'c'
        },
        {
            text: 'You have an algorithm running in $T(n)=n^{\\log_2 7}$.  Doubling the input multiplies time by',
            type: 'select',
            options: [
                {v:'a', t:'a) 7'},
                {v:'b', t:'b) $7^{\\log_2 2}$'},
                {v:'c', t:'c) $2^{\\log_2 7}$'},
                {v:'d', t:'d) $2\\log_2 7$'}
            ],
            answer: 'c'
        },
        {
            text: 'Which function grows <b>slowest</b>?',
            type: 'select',
            options: [
                {v:'a', t:'a) $n^{0.9}\\log n$'},
                {v:'b', t:'b) $\\sqrt n\\log^2 n$'},
                {v:'c', t:'c) $n^{0.75}$'},
                {v:'d', t:'d) $e^{\\sqrt{\\log n}}$'}
            ],
            answer: 'b'
        },
        {
            text: 'If $f(n)=O(n)$ and $g(n)=\\omega(n)$, which is always true?',
            type: 'select',
            options: [
                {v:'a', t:'a) $f(n)+g(n)=\\Theta(g(n))$'},
                {v:'b', t:'b) $f(n)g(n)=O(g(n))$'},
                {v:'c', t:'c) $g(n)/f(n)=O(1)$'},
                {v:'d', t:'d) $f(n)=\\Theta(g(n))$'}
            ],
            answer: 'a'
        },
        // 9-20
        {
            text: 'How many 5-digit numbers use digits 0–9 with <b>exactly two</b> even digits and no repetition?',
            type: 'select',
            options: [
                {v:'a', t:'a) 5040'},
                {v:'b', t:'b) 4536'},
                {v:'c', t:'c) 18900'},
                {v:'d', t:'d) 15120'}
            ],
            answer: 'd'
        },
        {
            text: 'Choose 4 non-consecutive integers from $\\{1,\\dots,20\\}$.  Ways?',
            type: 'select',
            options: [
                {v:'a', t:'a) 4845'},
                {v:'b', t:'b) 484'},
                {v:'c', t:'c) 4845 × 4'},
                {v:'d', t:'d) 7315'}
            ],
            answer: 'b'
        },
        {
            text: 'Eight identical balls into 4 distinct boxes, <b>at most</b> 3 per box. How many allocations?',
            type: 'select',
            options: [
                {v:'a', t:'a) 20'},
                {v:'b', t:'b) 34'},
                {v:'c', t:'c) 30'},
                {v:'d', t:'d) 28'}
            ],
            answer: 'c'
        },
        {
            text: 'Arrange letters of “ASSESSMENT” so that no two S’s are adjacent.',
            type: 'select',
            options: [
                {v:'a', t:'a) 50400'},
                {v:'b', t:'b) 75600'},
                {v:'c', t:'c) 100800'},
                {v:'d', t:'d) 120960'}
            ],
            answer: 'b'
        },
        {
            text: '# of ternary strings length 10 with <i>no</i> substring “12”.',
            type: 'select',
            options: [
                {v:'a', t:'a) $2^{10}$'},
                {v:'b', t:'b) $Fib_{12}$'},
                {v:'c', t:'c) 2 × 3⁹'},
                {v:'d', t:'d) 3 × 2⁹'}
            ],
            answer: 'b'
        },
        {
            text: 'A 6-wheel lock shows digits 0–9.  Code must start with a prime digit and contain <b>at least one</b> 0. How many codes?',
            type: 'select',
            options: [
                {v:'a', t:'a) $4\\cdot10^5-4\\cdot9^5$'},
                {v:'b', t:'b) $5\\cdot9^5$'},
                {v:'c', t:'c) $4\\cdot10^5-4\\cdot9^5$'},
                {v:'d', t:'d) $5\\cdot10^5-5\\cdot9^5$'}
            ],
            answer: 'a'
        },
        {
            text: 'Distribute 10 distinct tasks among 4 <b>indistinguishable</b> processors, none idle.',
            type: 'select',
            options: [
                {v:'a', t:'a) $S(10,4)$'},
                {v:'b', t:'b) $4^{10}$'},
                {v:'c', t:'c) $\\frac{10!}{(2!)^5}$'},
                {v:'d', t:'d) $P(10,4)$'}
            ],
            answer: 'a'
        },
        {
            text: 'Select a 6-person committee from 10 students if two rivals cannot both serve.',
            type: 'select',
            options: [
                {v:'a', t:'a) 210'},
                {v:'b', t:'b) 252'},
                {v:'c', t:'c) 196'},
                {v:'d', t:'d) 240'}
            ],
            answer: 'c'
        },
        {
            text: 'How many surjective functions from a 4-element set onto a 3-element set?',
            type: 'select',
            options: [
                {v:'a', t:'a) 18'},
                {v:'b', t:'b) 36'},
                {v:'c', t:'c) 24'},
                {v:'d', t:'d) 6'}
            ],
            answer: 'a'
        },
        {
            text: 'Ways to seat 5 couples in a line so that <b>exactly</b> 3 couples sit together?',
            type: 'select',
            options: [
                {v:'a', t:'a) 14400'},
                {v:'b', t:'b) 28800'},
                {v:'c', t:'c) 17280'},
                {v:'d', t:'d) 8640'}
            ],
            answer: 'c'
        },
        {
            text: '# of solutions to $x_1+x_2+x_3=25$ with $x_i\\ge5$ and $x_2\\le12$.',
            type: 'select',
            options: [
                {v:'a', t:'a) 105'},
                {v:'b', t:'b) 91'},
                {v:'c', t:'c) 78'},
                {v:'d', t:'d) 66'}
            ],
            answer: 'b'
        },
        {
            text: 'Choose 5 squares on a chessboard no two in same row or column.  Ways?',
            type: 'select',
            options: [
                {v:'a', t:'a) 64P5'},
                {v:'b', t:'b) 8P5 × 8C5'},
                {v:'c', t:'c) 8P5'},
                {v:'d', t:'d) 8C5 × 5!'}
            ],
            answer: 'd'
        },
        // 21-28
        {
            text: 'Let $f:\\mathbb R\\to\\mathbb R$, $f(x)=\\dfrac{5x-1}{2x+3}$.  Domain of $f^{-1}$?',
            type: 'select',
            options: [
                {v:'a', t:'a) $\\mathbb R\\backslash\\{-1.5\\}$'},
                {v:'b', t:'b) $\\mathbb R\\backslash\\{0.4\\}$'},
                {v:'c', t:'c) $\\mathbb R$'},
                {v:'d', t:'d) $\\mathbb R\\backslash\\{-0.6\\}$'}
            ],
            answer: 'a'
        },
        {
            text: 'Relation $R$ on $\\mathbb Z$: $aRb\\iff a-b$ divisible by 6.  R is',
            type: 'select',
            options: [
                {v:'a', t:'a) Equivalence'},
                {v:'b', t:'b) Symmetric only'},
                {v:'c', t:'c) Partial order'},
                {v:'d', t:'d) Antisymmetric'}
            ],
            answer: 'a'
        },
        {
            text: 'Sequence: $a_0=1,\\; a_{n+1}=a_n^2+1$.  Smallest $n$ with $a_n>100$?',
            type: 'select',
            options: [
                {v:'a', t:'a) 3'},
                {v:'b', t:'b) 4'},
                {v:'c', t:'c) 5'},
                {v:'d', t:'d) 6'}
            ],
            answer: 'b'
        },
        {
            text: 'If $f\\circ g$ is injective, which must hold?',
            type: 'select',
            options: [
                {v:'a', t:'a) $f$ injective'},
                {v:'b', t:'b) $g$ injective'},
                {v:'c', t:'c) $f$ surjective'},
                {v:'d', t:'d) $g$ surjective'}
            ],
            answer: 'b'
        },
        {
            text: 'Let $f(x)=x^3+x$.  $f$ is',
            type: 'select',
            options: [
                {v:'a', t:'a) Injective but not surjective'},
                {v:'b', t:'b) Surjective but not injective'},
                {v:'c', t:'c) Bijective'},
                {v:'d', t:'d) Neither'}
            ],
            answer: 'c'
        },
        {
            text: 'For sets $A,B\\subseteq U$, which identity always true?',
            type: 'select',
            options: [
                {v:'a', t:'a) $(A\\cup B)^c=A^c\\cap B^c$'},
                {v:'b', t:'b) $A-(B\\cap C)=(A-B)\\cap(A-C)$'},
                {v:'c', t:'c) $A\\Delta B=(A\\cup B)-(A\\cap B)$'},
                {v:'d', t:'d) All of these'}
            ],
            answer: 'd'
        },
        {
            text: 'In a DFA with 5 states, max edges (incl. self-loops) labelled with a binary alphabet is',
            type: 'select',
            options: [
                {v:'a', t:'a) 10'},
                {v:'b', t:'b) 25'},
                {v:'c', t:'c) 50'},
                {v:'d', t:'d) 20'}
            ],
            answer: 'c'
        },
        {
            text: 'If $T(n)=T(\\lfloor n/3\\rfloor)+T(\\lfloor 2n/3\\rfloor)+n$, then $T(n)=$',
            type: 'select',
            options: [
                {v:'a', t:'a) Θ(n log n)'},
                {v:'b', t:'b) Θ(n)'},
                {v:'c', t:'c) Θ(n log log n)'},
                {v:'d', t:'d) Θ(n²)'}
            ],
            answer: 'a'
        },
        // 29-35
        {
            text: 'A simple graph with 12 vertices, all degrees ≥ 7.  Minimum number of edges?',
            type: 'select',
            options: [
                {v:'a', t:'a) 42'},
                {v:'b', t:'b) 36'},
                {v:'c', t:'c) 40'},
                {v:'d', t:'d) 45'}
            ],
            answer: 'a'
        },
        {
            text: 'In any simple planar graph, $E \\le$',
            type: 'select',
            options: [
                {v:'a', t:'a) $2V-4$'},
                {v:'b', t:'b) $3V-6$'},
                {v:'c', t:'c) $5V-10$'},
                {v:'d', t:'d) $V+E$'}
            ],
            answer: 'b'
        },
        {
            text: 'Adjacency matrix of an undirected graph is always',
            type: 'select',
            options: [
                {v:'a', t:'a) Skew-symmetric'},
                {v:'b', t:'b) Upper-triangular'},
                {v:'c', t:'c) Symmetric'},
                {v:'d', t:'d) Diagonal'}
            ],
            answer: 'c'
        },
        {
            text: 'A tree with 2 vertices of degree 4 and all others degree 1 has how many vertices?',
            type: 'select',
            options: [
                {v:'a', t:'a) 6'},
                {v:'b', t:'b) 7'},
                {v:'c', t:'c) 8'},
                {v:'d', t:'d) 9'}
            ],
            answer: 'c'
        },
        {
            text: 'Number of Hamilton cycles in $K_6$: ',
            type: 'select',
            options: [
                {v:'a', t:'a) 60'},
                {v:'b', t:'b) 120'},
                {v:'c', t:'c) 360'},
                {v:'d', t:'d) 720'}
            ],
            answer: 'b'
        },
        {
            text: 'Chromatic number of a cycle $C_n$ is 2 when n is',
            type: 'select',
            options: [
                {v:'a', t:'a) Prime'},
                {v:'b', t:'b) Even >2'},
                {v:'c', t:'c) Odd'},
                {v:'d', t:'d) 3'}
            ],
            answer: 'b'
        },
        {
            text: 'For directed graph G with adjacency matrix $A$, the (i,j) entry of $A^3$ equals',
            type: 'select',
            options: [
                {v:'a', t:'a) # paths length 3 from i to j'},
                {v:'b', t:'b) # walks length 3 from i to j'},
                {v:'c', t:'c) 1 if edge (i,j) exists'},
                {v:'d', t:'d) Degree of vertex i'}
            ],
            answer: 'b'
        }
    ];

    // Render questions/pages
    function renderQuestions() {
        const form = document.getElementById('quiz-form');
        form.innerHTML = '';
        for (let i = 0; i < QUESTIONS.length; ++i) {
            const q = QUESTIONS[i];
            const div = document.createElement('div');
            div.className = 'quiz-page question-block';
            div.id = 'page' + (i+1);
            div.style.display = i === 0 ? '' : 'none';
            div.setAttribute('data-qidx', i);

            // Question text
            const label = document.createElement('label');
            label.innerHTML = `<b>Q${i+1}.</b> ${q.text}`;
            div.appendChild(label);
            div.appendChild(document.createElement('br'));

            // Input
            if (q.type === 'select') {
                const sel = document.createElement('select');
                sel.name = 'q' + (i+1);
                sel.innerHTML = `<option value="">--Select--</option>` +
                    q.options.map(opt => `<option value="${opt.v}">${opt.t}</option>`).join('');
                div.appendChild(sel);
            } else if (q.type === 'input') {
                const inp = document.createElement('input');
                inp.type = 'text';
                inp.name = 'q' + (i+1);
                inp.size = 8;
                inp.autocomplete = 'off';
                div.appendChild(inp);
            }

            // Navigation
            div.appendChild(document.createElement('br'));
            if (i > 0) {
                const prevBtn = document.createElement('button');
                prevBtn.type = 'button';
                prevBtn.textContent = 'Previous';
                prevBtn.onclick = () => showPage(i);
                div.appendChild(prevBtn);
            }
            if (i < QUESTIONS.length-1) {
                const nextBtn = document.createElement('button');
                nextBtn.type = 'button';
                nextBtn.textContent = 'Next';
                nextBtn.onclick = () => showPage(i+2);
                div.appendChild(nextBtn);
            } else {
                const submitBtn = document.createElement('button');
                submitBtn.type = 'submit';
                submitBtn.id = 'submit-btn';
                submitBtn.textContent = 'Submit';
                div.appendChild(submitBtn);
            }
            form.appendChild(div);
        }
    }

    // Render sidebar navigation
    function renderSidebar() {
        const qnav = document.getElementById('qnav');
        qnav.innerHTML = '';
        for (let i = 0; i < QUESTIONS.length; ++i) {
            const btn = document.createElement('div');
            btn.className = 'qnav-btn';
            btn.textContent = (i+1);
            btn.setAttribute('data-qnav', i+1);
            btn.onclick = () => showPage(i+1);
            qnav.appendChild(btn);
        }
    }

    // Show only one page at a time
    function showPage(idx) {
        for (let i = 1; i <= QUESTIONS.length; ++i) {
            const pg = document.getElementById('page'+i);
            if (pg) pg.style.display = (i === idx ? '' : 'none');
        }
        // Highlight sidebar
        document.querySelectorAll('.qnav-btn').forEach((el, i) => {
            el.classList.toggle('active', i+1 === idx);
        });
    }

    // Timer logic
    let timer = null, timerSeconds = 0, timerStarted = false;
    function startTimer(duration) {
        timerSeconds = duration;
        timerStarted = true;
        document.getElementById('start-timer-btn').disabled = true;
        updateTimerDisplay();
        timer = setInterval(() => {
            timerSeconds--;
            updateTimerDisplay();
            if (timerSeconds <= 0) {
                clearInterval(timer);
                timerStarted = false;
                document.getElementById('timer-display').textContent = "Time's up!";
                submitQuiz(true);
            }
        }, 1000);
    }
    function updateTimerDisplay() {
        const min = Math.floor(timerSeconds/60), sec = timerSeconds%60;
        document.getElementById('timer-display').textContent = `Time left: ${min}:${sec.toString().padStart(2,'0')}`;
    }

    // Quiz submit and grading
    function submitQuiz(auto=false) {
        // Remove requireds so form always submits
        document.querySelectorAll('[required]').forEach(el=>el.removeAttribute('required'));
        // Gather answers
        const form = document.getElementById('quiz-form');
        const data = new FormData(form);
        let score = 0;
        let correctArr = [];
        for (let i = 0; i < QUESTIONS.length; ++i) {
            const q = QUESTIONS[i];
            let userAns = (data.get('q'+(i+1))||'').trim();
            let isCorrect = (userAns === q.answer);
            correctArr.push(isCorrect);
            if (isCorrect) score++;
        }
        // Mark answers
        for (let i = 0; i < QUESTIONS.length; ++i) {
            const block = document.getElementById('page'+(i+1));
            block.classList.remove('correct','incorrect');
            if (correctArr[i]) block.classList.add('correct');
            else block.classList.add('incorrect');
        }
        // Mark sidebar
        document.querySelectorAll('.qnav-btn').forEach((el, i) => {
            el.classList.remove('correct','incorrect');
            if (correctArr[i]) el.classList.add('correct');
            else el.classList.add('incorrect');
        });
        // Show result
        document.getElementById('result').innerHTML =
            `<h2>Score: ${score} / ${QUESTIONS.length} (${Math.round(score*100/QUESTIONS.length)}%)</h2>`;
        // Feedback: list correct/incorrect
        let fb = '';
        for (let i = 0; i < QUESTIONS.length; ++i) {
            fb += `<div style="margin-bottom:4px;">
            <b>Q${i+1}:</b> <span style="color:${correctArr[i]?'#2ecc40':'#ff4136'}">${correctArr[i]?'Correct':'Incorrect'}</span>
            ${!correctArr[i]?`<br><span style="font-size:0.95em;">Correct answer: <b>${QUESTIONS[i].answer}</b></span>`:''}
        </div>`;
        }
        document.getElementById('feedback').innerHTML = fb;
        // Scroll to top
        window.scrollTo(0,0);
        // Disable all inputs
        document.querySelectorAll('input,select,button').forEach(el=>el.disabled=true);
        if (timer) clearInterval(timer);
    }

    // Mark sidebar gray for answered questions
    function updateSidebarAnswered() {
        document.querySelectorAll('.qnav-btn').forEach((el, i) => {
            el.classList.remove('answered');
            const q = QUESTIONS[i];
            let val = '';
            if (q.type === 'select') {
                const sel = document.querySelector(`[name="q${i+1}"]`);
                if (sel && sel.value) val = sel.value;
            } else if (q.type === 'input') {
                const inp = document.querySelector(`[name="q${i+1}"]`);
                if (inp && inp.value.trim()) val = inp.value.trim();
            }
            if (val) el.style.background = '#bbb';
            else el.style.background = '';
        });
    }

    // Main
    document.addEventListener('DOMContentLoaded', function() {
        renderQuestions();
        renderSidebar();
        showPage(1);

        // Sidebar highlight on load
        document.querySelectorAll('.qnav-btn')[0].classList.add('active');

        // Mark sidebar gray for answered questions on input/select change
        document.getElementById('quiz-form').addEventListener('input', updateSidebarAnswered);
        document.getElementById('quiz-form').addEventListener('change', updateSidebarAnswered);

        // Timer
        document.getElementById('start-timer-btn').onclick = function() {
            // 20 minutes for 35 questions
            startTimer(20*60);
        };

        // Form submit
        document.getElementById('quiz-form').onsubmit = function(e) {
            e.preventDefault();
            submitQuiz(false);
        };
        // Initial update for sidebar
        updateSidebarAnswered();
    });
</script>
<!-- MathJax for LaTeX rendering -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html>
